## Билет 22
Автор: Тарасов Денис

* ### Правило нуля
  Если все поля нашего класса примитивные типы или типы, поддерживающие move-семантику (например вместо обычных указателей использовать `unique_ptr` из стандартной библиотеки, где у всего поддерживается move-семантика), то необходимости в каких-либо дополнительных действиях нет. Не нужно каким-либо специальным образом переопределять деструктор, конструктор копирования/перемещения, оператор присвоения копированием/оператор присваивания перемещением, их можно оставить стандартными, если только вы не хотите делать что-то специфическое.


* ### Ref-qualifier
  В сигнатуры методов можно добавлять следующие модификаторы:

  * `&` - позволяет вызывать метод только от lvalue объектов.

  * `&&` - позволяет вызывать метод только от rvalue объектов.

  Примеры:

  * Например у стека не имеет смысла вызывать метод `push` от rvalue объекта, который просто умрет после этого.
  ```C++
  struct Stack {
      ..
      void push (const T&) &;
  }
  ```

  * В `lab_15` у нас создавалась цепочка из временных объектов, другого использования методов класса `enumerator` не предполагалось.
  ```C++
  auto drop(int count) && noexcept {
      return drop_enumerator<T>(*this, count);
  }
  ```

  * Для вектора, например, можно сделать 3 перегрузки `operator[]`
  ```C++
  struct vector {
      const T& operator[](size_t) const; // T var1 = v[i];
      T& operator[](size_t) &; // v[i] = var2;
      T&& operator[](size_t) &&; // Объект умрет, поэтому можно соптимизировать
          // и сделать move из нужного элемента.
  }
  ```

* ### Типичная реализация конструктора

  *
  ```C++
  struct Person {
      Person(std::string name) : name_(std::move(name)) {
        ..
      }
      std::string name_;
    }
  ```
  * Могут быть и другие методы, например тот же push у стека от временного значения.
  ```C++
  struct Stack {
      ..
      void push (T &&val) & {
          ..
          storage_[size] = std::move(val);
      }
  }
  ```

* ### Rvalue-ссылки

* ### Правила привязывания ссылок: lvalue, const lvalue, rvalue, бесполезность const rvalue

* ### Move-конструктор, оператор перемещающего присваивания, гарантия исключений (хотим noexcept)

* ### Правило пяти
